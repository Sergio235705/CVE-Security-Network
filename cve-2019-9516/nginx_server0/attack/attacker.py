import ssl
import hyper

# Custom SSLCONTEXT for not verifying SSLCertificate and Hostname
# or need SSLCONTEXT for SNI support
context = ssl.SSLContext(ssl.PROTOCOL_SSLv23)
context.verify_mode = ssl.CERT_NONE
context.check_hostname = False
context.set_alpn_protocols(['h2'])
hyper.tls._context = context

headers={'Host': '172.18.0.4', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.66 Safari/537.36', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9', 'x': 'ciaociao'}
headers2 = [('Upgrade-Insecure-Requests', '1')]
conn = hyper.HTTP20Connection('172.18.0.4', port=443, ssl_context=context)
for x in range(0, 100):
    conn.request('GET', '/', headers=headers)
    resp = conn.get_response()


print(resp.read())